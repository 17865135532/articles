# 文件系统

## pwd

`pwd`命令显示列出当前所在的目录。

```bash
$ pwd
```

## cd

`cd`命令用来改变用户所在的目录。

```bash
# 进入用户的主目录
$ cd

# 进入前一个工作目录
$ cd -

# 进入指定用户的主目录
$ cd ~user_name
```

## ls

`ls`目录可以显示指定目录的内容。不加参数时，显示当前目录的内容。

```bash
$ ls
```

上面命令显示当前目录的内容。

`ls`命令也可以显示指定文件是否存在。

```bash
$ ls foo.txt
foo.txt
```

`-l`参数可以显示文件的详细信息。

```bash
$ ls -l foo.txt
-rw-rw-r-- 1 me   me   0 2016-03-06 14:52 foo.txt
```

上面命令输出结果的第一栏，是文件的类型和权限。

文件类型分为以下几种。

- `-` 普通文件
- `d` 目录
- `l` 符号链接。注意，对于符号链接文件，剩余的文件属性总是"rwxrwxrwx"。
- `c` 字符设备文件，指按照字节流处理数据的设备，比如调制解调器。
- `b` 块设备文件，指按照数据块处理数据的设备，比如硬盘。

其他参数的用法。

```bash
# 显示多个目录的内容
$ ls ~ /usr

# -a --all 显示隐藏文件
$ ls -a

# -A 与-a类似，但是不显示当前目录和上一级目录两个点文件
$ ls -A

# -l 显示详细信息
$ ls -l

# -1 单列显示，每行只显示一个文件
$ ls -1

# -d 显示当前目录本身，而不是它的内容
# 通常与-l配合使用，列出一个目录本身的详细信息
$ ls -dl

# -F 目录名之后添加斜杠，可执行文件后面添加星号
$ ls -F

# -h 与-l配合使用，将文件大小显示为人类可读的格式

# -t 按文件修改时间排序，修改晚的排在前面
$ ls -t

# -s 按文件大小排序，

# --reverse 显示结果倒序排列
$ ls -lt --reverse
```

如果只显示一个目录里面的子目录，不显示文件，可以使用下面这些命令。

```bash
# 只显示常规目录
$ ls -d */
$ ls -F | grep /
$ ls -l | grep ^d
$ tree -dL 1

# 只显示隐藏目录
$ ls -d .*/

# 隐藏目录和非隐藏目录都显示
$ find -maxdepth 1 -type d
```

另一个简便方法是利用自动补全功能，先键入`cd`命令，然后连按两下`tab`键。

## file

`file`命令显示指定文件的类型。

```bash
$ file picture.jpg
picture.jpg: JPEG image data, JFIF standard 1.01
```

## chmod

`chmod`命令用于更改文件的权限，是“change mode”的缩写。

```bash
$ chmod 600 foo.txt
```

上面命令将`foo.txt`的权限改成了600。

`chmod`还可以接受四个缩写，为不同的对象单独设置权限。

- `u` 所有者“user”的简写
- `g` 用户组“group”的缩写
- `o` 其他所有人“others”的简写
- `a` 所有人“all”的简写

```bash
# 为所有者添加可执行权限
$ chmod u+x foo.txt

# 删除所有者的可执行权限
$ chmod u-x foo.txt

# 为所有人添加可执行权限，等价于 a+x
$ chmod +x foo.txt

# 删除其他人的读权限和写权限。
$ chmod o-rw foo.txt

# 设定用户组和其他人的权限是读权限和写权限
$ chmod go=rw foo.txt

# 为所有者添加执行权限，设定用户组和其他人为读权限和写权限，多种设定用逗号分隔
$ chmod u+x,go=rw foo.txt
```

## umask

`umask`用来查看和设置权限掩码。

```bash
$ umask
0022
```

上面命令显示当前系统之中，默认的文件掩码是`0022`，转为二进制就是`000 000 010 010`。

可以看到，这个掩码是一个12位的二进制数，后面的9位分别代表文件三种使用对象的三类权限。只要对应位置上是`1`，就表示关闭该项权限，所以`010`就表示关闭读权限。

新建文件时，通常不会带有执行权限，也就是说，新建文件的默认权限是`rw-rw-rw-`。如果文件掩码是`0022`，那么用户组和其他人的写权限也会被拿掉。

```bash
$ touch new.txt
$ ls -l new.txt
-rw-r--r-- 1 me   me   0 2016-03-06 14:52 new.txt
```

上面代码中，`new.txt`的用户组和其他人的写权限就没了。

`umask`后面跟着参数，就表示设置权限掩码。

```bash
$ umask 0000
```

上面命令将权限掩码设为`0000`，实际上就是关闭了权限掩码。

`umask`命令设置的掩码值只能在当前Shell会话中生效，若当前Shell会话结束后，则必须重新设置。
