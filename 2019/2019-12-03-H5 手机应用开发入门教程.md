# H5 手机 App 开发入门

随着移动设备的普及，手机上网成了主流。根据[《中国互联网报告》](https://www.ifanr.com/1254954)，中国手机网民已经超过8亿，人均每天上网三个多小时。

手机应用软件（mobile application，简称 mobile App）的巨大需求，导致开发工程师供不应求，手机 App 开发一直是招聘的热门岗位。

国内开发者口中常常提到的“H5 开发”，就是目前 App 开发的主流技术之一，主要特点是开发周期短、成本低、兼容传统的 Web 开发。但是，很少有文章详细介绍，到底什么是 H5 开发，原理是什么，它跟其他开发技术的差异在哪里。

本文就来谈谈这个主题，今天是第一篇，介绍和梳理一些基本概念。内容会尽量通俗，不过本来也没有太复杂的东西。本文的目标是希望成为新手的入门教程，如果你刚开始不知道读什么，就可以读这篇文章。对于熟练开发者，本文也适合回顾和整理知识点。

## 原生应用

原生应用程序是为在特定平台或设备上而开发的软件程序，因此具有使用特定设备的硬件和软件的能力。可通过设备主屏幕上的图标进行访问。

原生应用程序是专门为安装它们的平台而构建的，他们可以利用移动设备的硬件，包括加速度计，GPS和摄像头，麦克风，加速计或推送通知。

目前，两个主要的移动操作系统平台是Apple的iOS 和 Google的Android。

原生应用程序使用与平台操作系统相同的语言编写。例如，iOS 系统的原生应用程序应使用Objective-C 和 Swift 编写。Android 系统是 Java 和 Kotlin。由于跟底层系统的开发语言和模型是一致的，所以原生应用的性能和用户体验是非常好的。

如果一个应用程序希望在这两个平台上运行，都以原生应用运行，就必须为两个系统各自开发一个原生应用，这是大多数公司有两个手机 App 开发团队（安卓团队和 iOS 团队）的原因。而且，原生应用的开发，难度相对较高，相比其他方式会慢一些，成本会比较高。

它们必须下载安装才能使用。如果想要升级版本，用户必须重新下载安装一次。

## Web 应用

Web app 是通过浏览器使用的应用程序。本质上是网页，但是可以像应用程序那样使用。

Web应用程序通常用HTML，JavaScript或HTML编写。HTML5 大大增强了网页的功能，可以在浏览器获得类似本机的功能。

Web应用程序无需下载，但是要通过设备的 Web 浏览器进行访问。由于浏览器的限制，Web 应用程序无法利用所选平台上的硬件。

但是基于浏览器的应用程序有很多缺点。仅可以使用一些特定的浏览器向用户发送推送通知，并且应用程序登录和会话可能很快过期。此外，[Web应用程序](https://searchmobilecomputing.techtarget.com/tip/App-delivery-techniques-Virtualization-and-Web-based-apps)无法利用所有最新的OS功能。尽管 HTML5 提供了很多硬件调用接口，比如摄像头、GPS，点击呼叫功能以及相机API，但是更多接口没有提供。

Web 应用程序虽然有优点，比如不用安装，不需要应用商店的批准，再比如用户使用的总是软件的最新版本。但是有一个致命的缺点：不如原生应用程序方便。用户必须记住如何导航它们，挖掘书签菜单以找到它们，或知道如何将Web书签放置在其主屏幕上。这导致了，用户偏好手机 App。

谷歌曾经做过一项调查。对于1000个手机 App 和 Web 应用的调查，Web 应用的用户数量（1100万）多于 App（400万），但是 App 的用户使用时间（188分钟）远超 Web （9分钟）。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019120307.jpg)

![](https://www.wangbase.com/blogimg/asset/201912/bg2019120308.jpg)

根据comScore Inc.的研究，用户倾向于将大约87％的时间花在移动应用上，而将13％的时间花在智能手机上的移动Web应用上。

由于这个原因，基于移动浏览器的 Web 应用在企业中的使用案例有限。

不过，大多数用户将大部分时间花费在顶级应用程序上，而其他用户则处于休眠状态。由于这些趋势，导致 App 的获客成本变得极高，企业最终花费大量资金来吸引用户安装其软件的移动应用程序版本。这些应用程序中的许多最终都变成了从未使用过的僵尸应用程序。

同时，移动网站吸引了许多不安装该应用程序的唯一访问者。这对于应用程序使用不那么广泛的企业（例如零售商）很重要。平均用户每月使用27个应用程序，但访问了100多个移动网站。

但是拉塞尔说，他认为移动Web平台已足以满足当今大多数应用的需求。他说，阻碍移动Web应用程序使用的三个主要因素是缺乏主屏幕访问，缺乏对推送通知托盘的访问以及缺乏脱机访问。这导致 PWA 的出现，但是 PWA 目前为止还是缺乏特别成功的案例。

## 混合应用

混合应用，顾名思义就是原生应用与 Web 应用的一种结合，本质上是放在原生应用的壳里面的一个网站。可以理解成，这种应用里面隐藏了一个浏览器，用户看到的实际上是这个隐藏浏览器渲染出来的网页。

它包含一个Web视图（本质上是一个隔离的浏览器实例），这个 Web 视图可以与本机设备通信。

由于网页不是在浏览器中运行，而是在一个“壳”中运行，所以“壳”也称为容器。这个隐藏的浏览器，可以由容器自己做，也可以使用系统提供的渲染网页的控件，即 WebView。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019120404.jpg)

表面上看，它是一个原生应用，用户必须从应用商店下载安装，但是里面的所有页面或主要页面，是一个网页，用户在跟网页互动。该外壳程序可以提供手机系统提供的任何功能，浏览器及其插件在后端运行，对最终用户不可见。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019120309.jpg)

容器提供 API Bridge，API 桥。它到底可以调用本机的什么 API ，取决于容器提供的 API Bridge。一旦平台更新，容器也必须跟着推出新版。有时候，系统的 API 太新，容器没有提供，就只能自己来写。

混合应用，从概念上讲，可以兼得原生应用和 Web 应用的优点。开发人员可以使用跨平台的 Web 语言编写应用程序的核心逻辑，并且外壳程序可以使用本机代码与设备的独特功能进行交互。

混合应用程序的优点是：

（1）允许开发人员为移动应用程序编写一次代码，可以支持多个平台。相比，建立两个开发团队，这样的开发成本较低。而且，构建时间比原生应用快。

另一个很重要的原因是人员成本。Android 和 iOS 平台的原生应用刚刚诞生不久，原生的开发人员相对较少，招聘难度和成本都比较高。Web 的历史更长，技术更成熟，现成的前端程序员多，容易招到人。

（2）无论是否连接设备都可以运行的功能，这主要是跟 Web 应用相比。因为它的 HTML、JavaScript、CSS 都是下载到本地，所以不联网的情况下，也能正常渲染。

（3）与移动设备的文件系统集成，可以调用系统的原生接口。它是在容器内运行代码。容器可以提供脚本能力，访问手机系统的硬件 API，比如读取手机通讯录、使用麦克风和水平仪。

（4）可以方便地调用 Web 服务。

（5）发布和更新更简单。

缺点是：

（1）由于混合应用程序在源代码和目标平台之间增加了一层（浏览器层），因此性能可能比原生应用，甚至比 Web 应用都要慢一些。

由于性能问题，游戏基本不能使用这种方式开发，必须使用原生应用。

如果企业应用倾向于使用混合应用来提高代码重用性，并以更少的时间和费用打开更多的平台。

（2）不同手机系统的差异，比如浏览器的原生控件都不一样，应用程序的外观可能因平台而异，比如滚动条、按钮。

而且，由于兼容跨平台的原因，可能不能使用某些只有特定平台提供的功能，导致性能和体验不如纯的原生 App。

下图，安卓有物理的后退按钮，iPhone 没有。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019120310.jpg)

![](https://www.wangbase.com/blogimg/asset/201912/bg2019120311.jpg)

## 开发工具

### PhoneGap，Cordova，Ionic

PhoneGap（以前称为Apache Cordova），Ionic和Sencha等提供商的框架和工具就提供了本机包装器。它们通过WebView充当网页。

优点是容易开发，但是功能和性能都有限。

提供 API，调用本机接口。

```javascript
01.navigator.camera.getPicture (
02.    onCameraSuccess,
03.    onCameraError,
04.    {
05.        quality: 50,
06.        destinationType: Camera.DestinationType.DATA_URL
07.    }
08.);
09. 
10.function onCameraSuccess (imageData) {
11.    var image = document.getElementById('myImage');
12.    image.src = "data:image/jpeg;base64," + imageData;
13.}
14.  
15.function onCameraError (message) {
16.    alert('Failed because: ' + message);
17.}
```

与 ionic 类似的框架，还有 Framework 7。

### Xamarin

Xamarin是跨平台软件开发工具，用于在iOS和Android以及其他依赖C＃作为编程语言的平台上进行本机应用程序开发。

微软于2016年3月收购Xamarin。它可以让你在 Windows 平台开发 iOS 应用。

### React Native

这些工具仍使用Web技术。它们弥补了WebView的性能缺陷，并使脱机内容可访问。

在幕后，发生的是将每个工具中用JavaScript编写的调用映射到给定移动平台上与本机UI元素相对应的那些调用。

文本渲染在iOS上解释为[UIView]，在Android上解释为[TextView]。

除了 React Native，还有一个 NativeScript 项目，也是做类似的事情，把 JavaScript 编译成原生控件。不过，它的开发模型是基于 Angular.js。

## Xcode

[https://developer.apple.com/documentation/webkit/wkwebview](https://developer.apple.com/documentation/webkit/wkwebview)

App Store 进行安装 Xcode

1、新建一个项目
2、选择 ios -> single view app

名称 iOSWebViewTutorial

团队、组织名、组织识别符`com.[你的 ID]`、语言 Swift、语言 Swift、SwiftUI/StoryBoard、清除单元测试、UI 测试

选择储存位置

## Android Studio

[https://medium.com/@stevesohcot/andriod-studio-webview-tutorial-4651701d7d1a](https://medium.com/@stevesohcot/andriod-studio-webview-tutorial-4651701d7d1a)

[https://abhiandroid.com/ui/webview](https://abhiandroid.com/ui/webview)

```
import androidx.appcompat.app.AppCompatActivity;
```

## Ionic

部署

[https://ionicframework.com/docs/v3/intro/deploying/](https://ionicframework.com/docs/v3/intro/deploying/)

