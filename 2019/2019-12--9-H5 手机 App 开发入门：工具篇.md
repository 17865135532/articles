# H5 手机 App 开发入门：工具篇

学习开发手机 App，有不同的路径。

如果你比较熟悉 Java，可以学习安卓开发；如果比较熟悉 C++，可以通过 Object-C 学习 iOS 开发；如果像我一样，比较熟悉 Web 网页技术，那么 H5 开发是最合适的。

这个教程的第一篇，已经介绍过什么是 H5 了，H5 其实就是混合 App。今天紧接上一篇，看看如何实现一个最简单的混合 App：加载一张网页。一打开这个 App，用户看到的页面其实是 HTML5 网页。

我会逐一介绍常用的工具和开发框架，看看它们如何实现 App 里面加载 H5 网页。不过，本文的目的不是讲解技术细节，操作步骤和代码都简单带过，重点是介绍工具，它们的差异在哪里，希望读者对 App 的技术实现有一个总体的认识。

## 一、WebView 是什么

App 加载网页，其实很简单。各种操作系统都提供一些现成的组件，供开发者调用，这叫做控件（control）。其中有一个控件，专门用来展示网页，叫做 WebView。

应用程序的界面，只要放上 WebView，就能展示网页。所以，混合 App 最简单的实现，就是在原生 App 的页面上放一个 WebView，再加载网页。

不同系统的 WebView 控件名称不一样，安卓系统就叫 WebView，iOS 系统有较老的 UIWebView，也有较新的 WKWebView。

## 二、Xcode

下面先来看看，iOS 的原生 App 怎么通过 WebView 加载网页。

这里就需要 Xcode，它是苹果公司提供的集成开发环境，也是 iOS 系统的官方开发工具。iOS App 都是 Xcode 打包生成的。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121215.jpg)

第一件事是在 Mac 电脑上通过应用商店安装  Xcode。注意，Xcode 只能在 Mac 电脑使用，不支持其他系统。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121214.jpg)

安装完成后，点击打开，选择新建一个项目。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121216.jpg)

类型是单视图 App。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121217.jpg)

然后，填写项目名、组织名称（随便起一个）、语言是 Swift、用户界面是 Storyboard。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121218.jpg)

Xcode 会让你指定项目的储存位置，指定以后，就进入了编程页面。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121219.jpg)

然后，按照[官方文档](https://developer.apple.com/documentation/webkit/wkwebview)，在`ViewController.swifter`文件，填入下面的代码。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121220.jpg)

上面代码的意思就是，App 启动加载视图的时候，新建一个 WebView 实例，然后对苹果官方发出请求，将返回的网页在 WebView 实例里面加载。

点击工具栏的运行按钮，就可以查看代码的运行结果。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121221.jpg)

Xcode 就弹出一个 iPhone 模拟器窗口，里面就是当前 App 的运行结果，显示苹果公司的官网。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121222.jpg)

如果一切正常，就可以让 Xcode 对源码打包，生成 App 的二进制安装文件。

## 三、Android Studio

安卓官方推荐的开发工具是 Android Studio，安卓的原生 App 就需要用它开发。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121224.jpg)

首先，可以去[官网](https://developer.android.com/studio)下载，安装完成后，启动选择新建一个项目。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121225.jpg)

下一步，选择“Empty Activity”。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121226.jpg)

然后，android studio 会要求设置项目名称等参数，其中开发语言可以选择 Java。这样就可以进入了开发环境。因为它是基于 Java IDE 修改的，懂 Java 的朋友应该对这个界面比较熟悉。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121227.jpg)

接下来，按照网上的[这篇教程](https://codingislove.com/android-web-view/)，修改三个文件。

> - `activity_main.xml`
> - `AndroidManifest.xml`
> - `MainActivity.java`

其中，关键是`MainActivity.java`里面的代码。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121228.jpg)

上面红框处代码，就是添加的 WebView 代码。作用是生成视图的时候（`onCreate()`），新建一个 WebView，去加载外部网址。

运行代码之后，android studio 要求必须安装安卓模拟器，或者连接真机。设置完成后，在工具栏上选择目标设备，然后点击旁边的运行按钮，就可以运行代码了。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121229.jpg)

如果没有报错，就可以在模拟器或者真机上，看到 App 自动打开，加载外部网址。

![](https://www.wangbase.com/blogimg/asset/201912/bg2019121230.jpg)

后面就可以在 android studio 里面打包，生成 App 的二进制文件。

## 四、PhoneGap，Cordova，Ionic

PhoneGap（以前称为Apache Cordova），Ionic和Sencha等提供商的框架和工具就提供了本机包装器。它们通过WebView充当网页。

优点是容易开发，但是功能和性能都有限。

提供 API，调用本机接口。

```javascript
01.navigator.camera.getPicture (
02.    onCameraSuccess,
03.    onCameraError,
04.    {
05.        quality: 50,
06.        destinationType: Camera.DestinationType.DATA_URL
07.    }
08.);
09. 
10.function onCameraSuccess (imageData) {
11.    var image = document.getElementById('myImage');
12.    image.src = "data:image/jpeg;base64," + imageData;
13.}
14.  
15.function onCameraError (message) {
16.    alert('Failed because: ' + message);
17.}
```

与 ionic 类似的框架，还有 Framework 7。

### Xamarin

Xamarin是跨平台软件开发工具，用于在iOS和Android以及其他依赖C＃作为编程语言的平台上进行本机应用程序开发。

微软于2016年3月收购Xamarin。它可以让你在 Windows 平台开发 iOS 应用。

### React Native

这些工具仍使用Web技术。它们弥补了WebView的性能缺陷，并使脱机内容可访问。

在幕后，发生的是将每个工具中用JavaScript编写的调用映射到给定移动平台上与本机UI元素相对应的那些调用。

文本渲染在iOS上解释为[UIView]，在Android上解释为[TextView]。

除了 React Native，还有一个 NativeScript 项目，也是做类似的事情，把 JavaScript 编译成原生控件。不过，它的开发模型是基于 Angular.js。

## Flatter

## Ionic

部署

[https://ionicframework.com/docs/v3/intro/deploying/](https://ionicframework.com/docs/v3/intro/deploying/)

