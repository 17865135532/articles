# exFAT 文件系统指南

国庆假期，我拍了一些手机视频，打算存到新买的移动硬盘。

然后，我就发现了问题。我的 Mac 电脑无法写入移动硬盘，因为移动硬盘的默认文件系统是 NTFS，Mac 不支持写入 NTFS。

虽然可以买一个软件解决这个问题，但是我不想为这种兼容性功能付钱。经过一番研究，我发现把移动硬盘的文件系统改成 exFAT，就可以解决问题，Mac 原生支持读写 exFAT。

由于这种问题很普遍，下面我就来写一写跟 exFAT 相关的知识。

# 一、文件系统

所谓文件系统，就是文件的储存方式。简单说，就是在储存设备上划分门牌号，每个文件分配一个门牌，然后才能按照地址读写这个文件。

一个没有文件系统的硬盘，就是一块荒地。你只能说，这块荒地上有人住，但是具体地址你说不出来。只有划分了路牌，你才能说出，这个人住在“人民路15号”，这样才能精确定位。文件系统就是路牌的划分方法。

储存设备都需要指定文件系统，计算机才能读写。所谓“格式化”操作，就是加上文件系统。不同的操作系统有不同的文件系统，Linux 使用 ext4，OSX使用 HFS +，Windows 使用 NTFS，Solaris 和 Unix 使用ZFS。如果计算机不认识某个文件系统，就会显示这块盘无法读写。

我遇到的问题就是，NTFS 文件系统是 Windows 的专有系统，Mac 可以读，但是默认不能写入。

# 二、Windows 的文件系统

Windows 系统主要有三种文件系统。

> - FAT32
> - NTFS
> - exFAT

格式化硬盘的时候，Windows 系统会提供这三种文件系统让你选。这时应该选哪一种呢？

FAT32 是最老的文件系统，所有操作系统都支持，兼容性最好。但是，它是为32位系统设计的，文件不能超过 2<sup>32</sup> - 1 个字节，也就是不能超过 4GB，分区不能超过 8TB。目前来看，这个文件系统有点过时了，只适合小文件，如果有大的视频文件，就不能使用它。

NTFS 是 Windows 的默认文件系统，用来替换 FAT32。Windows 的系统盘只能使用这个系统，移动硬盘买来装的也是它。

exFAT 可以看作是 FAT32 的64位升级版，`ex`就是 extended 的缩写（表示“扩展的 FAT32”），功能不如 NTFS，但是解决了文件和分区的大小问题，最大可以到 128PB。由于 Mac 和 Linux 电脑都可以读写这种系统，所以可以让移动硬盘用这种文件系统。

## 三、解决方案

简单说，就是移动硬盘买来后，你把它格式化成 exFAT 格式，这样就 OK。

Windows 可以在资源管理器进行格式化。

Mac 可以在磁盘工具进行格式化。

完成格式化以后，读写就没有问题了。Linux 系统可能需要装一下 exFAT 支持，Ubuntu 和 Debian 执行下面的命令。

```bash
$ sudo apt-get install exfat-utils exfat-fuse
```

一般的读者读到这里，就可以了。如果你像我一样，主要使用 Linux 系统，希望用 Linux 进行 exFAT 初始化，请接着往下读。

## 四、Linux 的 exFAT 初始化

Linux 进行硬盘初始化，需要先找到设备路径。

```bash
$ sudo fdisk -l
```

上面命令会列出本机的所有储存设备，移动硬盘一般是`/dev/sdX1`的形式，比如`/dev/sdc1`。这里需要了解`sdX1`的含义，`sd`是可移动设备和SATA 设备，`X`表示设备的序号，依次为 a、b、c 等，最后的`1`表示这是该设备的第一个分区。

注意，如果你的储存设备只显示为`/dev/sdX`，没有最后的数字，表明这个设备没有分区。exFAT 只能用来格式化硬盘的一个区，所以必须先分区，再格式化，这个放在下一部分介绍。

如果你的设备已经分区了，可以直接使用下面的命令进行格式化。

```bash
$ mkfs.exfat /dev/sdX1
```

## 五、分区表

所谓硬盘分区，就是指一块硬盘上面，同时存在多个文件系统。每个文件系统管理的区域，就称为一个区（partition）。比如，一块 100 GB 的硬盘，可以一半是 NTFS，另一半是 exFAT。

硬盘必须先分区，才能指定每个区的文件系统。



https://www.howtogeek.com/235655/how-to-mount-and-use-an-exfat-drive-on-linux/

https://www.howtogeek.com/235596/whats-the-difference-between-fat32-exfat-and-ntfs/

https://unix.stackexchange.com/questions/61209/create-and-format-exfat-partition-from-linux

https://matthew.komputerwiz.net/2015/12/13/formatting-universal-drive.html#fn:zfs-best


